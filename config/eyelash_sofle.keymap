// -------------------------------------------------------------
// SOFLE – LAYOUT PROFISSIONAL QWERTY COM SUPORTE NEOVIM
// BY ChatGPT – totalmente compatível com Keymap Editor
// -------------------------------------------------------------
// Layers:
// 0 – Base (QWERTY + Home Row Mods)
// 1 – Symbols (Space Hold)
// 2 – Numbers (Enter Hold)
// 3 – Navigation / Editing
// 4 – System (Bluetooth, Reset, Bootloader)
// Combos customizados para Neovim
// -------------------------------------------------------------

keymap {
    compatible = "zmk,keymap";

    //--------------------------------------------------------------------
    // LAYER 0 — BASE (QWERTY + HOME-ROW MODS)
    //--------------------------------------------------------------------
    layer0 {
        bindings = <
            &kp Q        &kp W         &kp E         &kp R         &kp T                     &none   &kp Y          &kp U            &kp I            &kp O          &kp P
            &hm LCTRL A  &hm LALT S    &hm LGUI D     &hm LSHFT F   &kp G                    &none   &kp H          &hm RCTRL J      &hm RALT K       &hm RGUI L     &hm RSHFT SEMI
            &kp Z        &kp X         &kp C         &kp V         &kp B                    &none   &kp N          &kp M            &kp COMMA        &kp DOT        &kp SLASH
                             &lt 1 SPACE      &lt 2 ENTER
        >;
    };

    //--------------------------------------------------------------------
    // LAYER 1 — SYMBOLS (Sym Layer → Space Hold)
    //--------------------------------------------------------------------
    layer1 {
        bindings = <
            &kp EXCL    &kp AT       &kp HASH     &kp DLLR     &kp PRCNT       &none   &kp CARET &kp AMPS    &kp STAR     &kp LPAR   &kp RPAR
            &kp EQUAL   &kp PLUS     &kp MINUS    &kp UNDER    &kp FSLH        &none   &kp DQT   &kp SQT     &kp LBRC     &kp RBRC   &kp BSLH
            &kp TILDE   &kp PIPE     &kp LT       &kp GT       &kp QMARK       &none   &kp LBRKT &kp RBRKT   &kp COLON    &kp SEMI   &kp GRAVE
                         &trans     &trans
        >;
    };

    //--------------------------------------------------------------------
    // LAYER 2 — NUMBERS (Num Layer → Enter Hold)
    //--------------------------------------------------------------------
    layer2 {
        bindings = <
            &kp N1      &kp N2      &kp N3       &kp KP_PLUS  &kp KP_MULT     &none   &trans &trans &trans &trans &trans
            &kp N4      &kp N5      &kp N6       &kp KP_MINUS &kp KP_DIV      &none   &trans &trans &trans &trans &trans
            &kp N7      &kp N8      &kp N9       &kp N0       &kp EQUAL       &none   &trans &trans &trans &trans &trans
                          &trans    &trans
        >;
    };

    //--------------------------------------------------------------------
    // LAYER 3 — NAVIGATION & EDITING
    //--------------------------------------------------------------------
    layer3 {
        bindings = <
            &kp ESC    &kp HOME   &kp PG_UP   &kp END      &kp F5              &none   &kp CUT  &kp COPY &kp PASTE &kp UNDO  &trans
            &kp TAB    &kp LEFT   &kp DOWN    &kp UP       &kp RIGHT           &none   &kp DEL  &kp BSPC &kp RET   &kp SAVE  &trans
            &trans     &trans     &trans      &trans       &trans              &none   &trans   &trans   &trans    &trans    &trans
                          &trans   &trans
        >;
    };

    //--------------------------------------------------------------------
    // LAYER 4 — SYSTEM (Bluetooth, Sleep, Boot)
    //--------------------------------------------------------------------
    layer4 {
        bindings = <
            &bt BT_SEL 0   &bt BT_SEL 1   &bt BT_SEL 2   &bt BT_CLR   &reset       &none  &trans &trans &trans &trans &trans
            &caps_word     &kp SLEEP_DIS  &battery       &bootloader  &trans       &none  &trans &trans &trans &trans &trans
            &trans         &trans         &trans         &trans       &trans       &none  &trans &trans &trans &trans &trans
                            &trans       &trans
        >;
    };

    //--------------------------------------------------------------------
    // COMBOS — OTIMIZADOS PARA NEOVIM
    //--------------------------------------------------------------------
    combos {
        compatible = "zmk,combos";

        // ------------------ UNDO / REDO ------------------
        combo_undo {
            timeout-ms = <30>;
            key-positions = <10 11>;   // A + S
            bindings = <&kp U>;
        };

        combo_redo {
            timeout-ms = <30>;
            key-positions = <1 2>;     // W + E
            bindings = <&kp C_R>;
        };

        // ------------------ SAVE (:w) ------------------
        combo_save_file {
            timeout-ms = <40>;
            key-positions = <2 3>;     // E + R
            bindings = <&macro_tap ":w\n">;
        };

        // ------------------ SAVE & QUIT (:wq) ------------------
        combo_wq {
            timeout-ms = <40>;
            key-positions = <22 23>;   // K + L
            bindings = <&macro_tap ":wq\n">;
        };

        // ------------------ QUIT WITHOUT SAVE (:q!) ------------------
        combo_quit_force {
            timeout-ms = <40>;
            key-positions = <24 25>;   // O + P
            bindings = <&macro_tap ":q!\n">;
        };

        // ------------------ SEARCH "/" ------------------
        combo_search {
            timeout-ms = <30>;
            key-positions = <21 22>;   // U + I
            bindings = <&kp SLASH>;
        };

        // ------------------ SUBSTITUTE (:%s/) ------------------
        combo_substitute {
            timeout-ms = <40>;
            key-positions = <20 21>;   // Y + U
            bindings = <&macro_tap ":%s/">';
        };

        // ------------------ SPLITS ------------------
        combo_vsplit {
            timeout-ms = <40>;
            key-positions = <22 23>;   // I + O
            bindings = <&macro_tap ":vsp\n">;
        };

        combo_hsplit {
            timeout-ms = <40>;
            key-positions = <13 14>;   // J + K
            bindings = <&macro_tap ":sp\n">;
        };

        // ------------------ PONTUAÇÃO INTELIGENTE ------------------
        combo_semicolon {
            timeout-ms = <30>;
            key-positions = <29 30>;  // , + .
            bindings = <&kp SEMI>;
        };
    };
};
